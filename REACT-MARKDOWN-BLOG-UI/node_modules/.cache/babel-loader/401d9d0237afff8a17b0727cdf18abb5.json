{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\Projects\\\\React_Markdown_Blog_Project\\\\REACT-MARKDOWN-BLOG-UI\\\\src\\\\containers\\\\PostUpdate.js\";\nimport React, { useState, useRef } from 'react';\nimport { Header, Button, Form, Image, Divider } from 'semantic-ui-react';\nimport { useFetch, history } from '../helpers';\nimport axios from 'axios';\nimport MdEditor from 'react-markdown-editor-lite';\nimport MarkdownIt from 'markdown-it';\nimport 'react-markdown-editor-lite/lib/index.css';\nimport Loader from '../components/Loader';\nimport Message from '../components/Message';\nimport { useParams } from 'react-router-dom';\nimport { api } from '../api';\n\nconst PostUpdateForm = ({\n  postSlug,\n  initialTitle,\n  initialContent,\n  initialThumbnail\n}) => {\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [title, setTitle] = useState(initialTitle);\n  const [markdown, setMarkdown] = useState(initialContent);\n  const [currentThumbnail, setCurrentThumbnail] = useState(initialThumbnail);\n  const [thumbnail, setThumbnail] = useState(null);\n  const mdParser = new MarkdownIt();\n  const fileInputRef = useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    const formData = new FormData();\n\n    if (thumbnail) {\n      formData.append(\"thumbnail\", thumbnail);\n    }\n\n    formData.append(\"title\", title);\n    formData.append(\"content\", markdown);\n    axios.put(api.posts.update(postSlug), formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        \"Authorization\": \"Token a8df07ad37824b4c5fd9ac5d4bc13e424fa4fd8b\"\n      }\n    }).then(res => {\n      setLoading(false);\n      history.push('/');\n    }).catch(err => {\n      setLoading(false);\n      setError(err.message || err);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, \"Update Post\"), error && /*#__PURE__*/React.createElement(Message, {\n    negative: true,\n    message: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }\n  }), currentThumbnail && /*#__PURE__*/React.createElement(Image, {\n    src: currentThumbnail,\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 30\n    }\n  }), thumbnail && /*#__PURE__*/React.createElement(Message, {\n    info: true,\n    message: `Selected image: ${thumbnail.name}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Title of your post\",\n    value: title,\n    onChange: e => setTitle(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(MdEditor, {\n    value: markdown,\n    style: {\n      height: \"500px\"\n    },\n    renderHTML: text => mdParser.render(text),\n    onChange: ({\n      text\n    }) => setMarkdown(text),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    fluid: true,\n    content: \"Choose a thumbnail\",\n    labelPosition: \"left\",\n    icon: \"file\",\n    onClick: () => fileInputRef.current.click(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    ref: fileInputRef,\n    type: \"file\",\n    hidden: true,\n    onChange: e => setThumbnail(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    fluid: true,\n    loading: loading,\n    disabled: loading,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Submit\")));\n};\n\nconst PostUpdate = () => {\n  const {\n    postSlug\n  } = useParams();\n  const {\n    data,\n    loading,\n    error\n  } = useFetch(api.posts.retrieve(postSlug));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, error && /*#__PURE__*/React.createElement(Message, {\n    negative: true,\n    message: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }), loading && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }), data && /*#__PURE__*/React.createElement(PostUpdateForm, {\n    postSlug: postSlug,\n    initialTitle: data.title,\n    initialContent: data.content,\n    initialThumbnail: data.thumbnail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 18\n    }\n  }));\n};\n\nexport default PostUpdate;","map":{"version":3,"sources":["C:/Users/DELL/Desktop/Projects/React_Markdown_Blog_Project/REACT-MARKDOWN-BLOG-UI/src/containers/PostUpdate.js"],"names":["React","useState","useRef","Header","Button","Form","Image","Divider","useFetch","history","axios","MdEditor","MarkdownIt","Loader","Message","useParams","api","PostUpdateForm","postSlug","initialTitle","initialContent","initialThumbnail","error","setError","loading","setLoading","title","setTitle","markdown","setMarkdown","currentThumbnail","setCurrentThumbnail","thumbnail","setThumbnail","mdParser","fileInputRef","handleSubmit","e","preventDefault","formData","FormData","append","put","posts","update","headers","then","res","push","catch","err","message","name","target","value","height","text","render","current","click","files","PostUpdate","data","retrieve","content"],"mappings":"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","sourcesContent":["import React ,{useState, useRef}from 'react';\r\nimport {Header, Button, Form,Image,Divider} from 'semantic-ui-react';\r\nimport {useFetch, history} from '../helpers';\r\nimport axios from 'axios';\r\nimport MdEditor from 'react-markdown-editor-lite'\r\nimport MarkdownIt from 'markdown-it'\r\nimport 'react-markdown-editor-lite/lib/index.css';\r\n\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport {useParams } from 'react-router-dom';\r\nimport {api} from '../api';\r\n\r\nconst PostUpdateForm = ({postSlug,initialTitle,initialContent, initialThumbnail}) =>{\r\n    const [error, setError] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n    \r\n    const [title, setTitle] = useState(initialTitle);\r\n    const [markdown, setMarkdown] = useState(initialContent)\r\n    const [currentThumbnail, setCurrentThumbnail] = useState(initialThumbnail)\r\n    const [thumbnail, setThumbnail] = useState(null)\r\n\r\n    const mdParser = new MarkdownIt();\r\n\r\n    const fileInputRef = useRef()\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        const formData = new FormData()\r\n        if (thumbnail) {\r\n            formData.append(\"thumbnail\", thumbnail)\r\n        }\r\n        formData.append(\"title\", title)\r\n        formData.append(\"content\", markdown)\r\n        axios\r\n            .put(api.posts.update(postSlug), formData, {\r\n                headers: {\r\n                    \"Content-Type\": \"multipart/form-data\",\r\n                    \"Authorization\": \"Token a8df07ad37824b4c5fd9ac5d4bc13e424fa4fd8b\"\r\n                }\r\n            })\r\n            .then(res => {\r\n                setLoading(false);\r\n                history.push('/')\r\n            })\r\n            .catch(err => {\r\n                setLoading(false);\r\n                setError(err.message || err)\r\n            })\r\n    }\r\n    \r\n    return(\r\n        <div>\r\n        <Header>Update Post</Header>\r\n        {error && <Message negative message={error} />}\r\n        {currentThumbnail && <Image src={currentThumbnail} size=\"small\"/>}\r\n        {thumbnail && <Message info message={`Selected image: ${thumbnail.name}`} />}\r\n        <Divider/>\r\n        <Form onSubmit={handleSubmit}>\r\n                <Form.Field>\r\n                    <label>Title</label>\r\n                    <input \r\n                        placeholder='Title of your post' \r\n                        value={title} \r\n                        onChange={e => setTitle(e.target.value)}\r\n                    />\r\n                </Form.Field>\r\n                <MdEditor\r\n                    value={markdown}\r\n                    style={{ height: \"500px\" }}\r\n                    renderHTML={(text) => mdParser.render(text)}\r\n                    onChange={({text}) => setMarkdown(text)}\r\n                /> \r\n                <Form.Field>\r\n                    <Button\r\n                        type=\"button\"\r\n                        fluid\r\n                        content=\"Choose a thumbnail\" \r\n                        labelPosition=\"left\" \r\n                        icon=\"file\"\r\n                        onClick={() => fileInputRef.current.click()}\r\n                    />\r\n                    <input \r\n                        ref={fileInputRef} \r\n                        type=\"file\" \r\n                        hidden\r\n                        onChange={e => setThumbnail(e.target.files[0])}\r\n                    />\r\n                </Form.Field>\r\n                <Button primary fluid loading={loading} disabled={loading} type='submit'>Submit</Button>\r\n            </Form>\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nconst PostUpdate =() =>{\r\n    const {postSlug} = useParams()\r\n    const {data,loading,error} = useFetch(api.posts.retrieve(postSlug))\r\n    return (\r\n        <>\r\n        {error && <Message negative message={error} />}\r\n        {loading && <Loader/>}\r\n        {data && <PostUpdateForm\r\n            postSlug ={postSlug}\r\n            initialTitle={data.title}\r\n            initialContent ={data.content}\r\n            initialThumbnail = {data.thumbnail}\r\n            />}\r\n        </>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default PostUpdate;"]},"metadata":{},"sourceType":"module"}